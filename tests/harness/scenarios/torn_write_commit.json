{
  "name": "torn_write_commit",
  "description": "Crash mid-commit frame write - transaction treated as uncommitted",
  "db_path": "$TMPDIR/decentdb_torn_write_commit.ddb",
  "setup_sql": "CREATE TABLE test (id INT PRIMARY KEY)",
  "sql": "INSERT INTO test VALUES (1)",
  "failpoint": {
    "label": "wal_write_frame",
    "kind": "partial",
    "bytes": 4
  },
  "verify": {
    "expect_crash": true,
    "post_crash_sql": "SELECT COUNT(*) FROM test",
    "expect_rows": ["0"]
  }
}
